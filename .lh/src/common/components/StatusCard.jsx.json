{
    "sourceFile": "src/common/components/StatusCard.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 6,
            "patches": [
                {
                    "date": 1771001282434,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1771001371541,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,5 +1,7 @@\n-import React, { useState } from 'react';\n+import React, {\n+  useState\n+} from 'react';\n import dayjs from 'dayjs';\n import { useDispatch, useSelector } from 'react-redux';\n import { useNavigate, Link as RouterLink } from 'react-router-dom';\n import { Rnd } from 'react-rnd';\n@@ -10,253 +12,817 @@\n   CardActions,\n   IconButton,\n   Menu,\n   MenuItem,\n+  CardMedia,\n   Link,\n   Tooltip,\n   Box,\n+  Grid,\n+  Divider,\n+  Stack,\n   Chip,\n-  Divider,\n+  Avatar,\n+  LinearProgress,\n+  CircularProgress,\n } from '@mui/material';\n+import { makeStyles } from 'tss-react/mui';\n import CloseIcon from '@mui/icons-material/Close';\n import RouteIcon from '@mui/icons-material/Route';\n import SendIcon from '@mui/icons-material/Send';\n import EditIcon from '@mui/icons-material/Edit';\n import DeleteIcon from '@mui/icons-material/Delete';\n import SpeedIcon from '@mui/icons-material/Speed';\n import RoomIcon from '@mui/icons-material/Room';\n+import AccessTimeIcon from '@mui/icons-material/AccessTime';\n+import MyLocationIcon from '@mui/icons-material/MyLocation';\n+import ExploreIcon from '@mui/icons-material/Explore';\n+import PowerIcon from '@mui/icons-material/Power';\n import DirectionsCarIcon from '@mui/icons-material/DirectionsCar';\n-import AccessTimeIcon from '@mui/icons-material/AccessTime';\n+import AvTimerIcon from '@mui/icons-material/AvTimer';\n+import AlarmIcon from '@mui/icons-material/Alarm';\n+import InfoOutlinedIcon from '@mui/icons-material/InfoOutlined';\n+import LocationSearchingIcon from '@mui/icons-material/LocationSearching';\n+import LocalGasStationIcon from '@mui/icons-material/LocalGasStation';\n+import VpnKeyIcon from '@mui/icons-material/VpnKey';\n+import CodeIcon from '@mui/icons-material/Code';\n+import TerrainIcon from '@mui/icons-material/Terrain';\n import TuneIcon from '@mui/icons-material/Tune';\n \n+import { useTranslation } from './LocalizationProvider';\n+import RemoveDialog from './RemoveDialog';\n+import PositionValue from './PositionValue';\n+import { useDeviceReadonly, useRestriction } from '../util/permissions';\n+import usePositionAttributes from '../attributes/usePositionAttributes';\n+import { devicesActions } from '../../store';\n+import { useCatch, useCatchCallback } from '../../reactHelper';\n+import { useAttributePreference } from '../util/preferences';\n+import fetchOrThrow from '../util/fetchOrThrow';\n+import VehicleNumberPlate from './VehicleNumberPlate';\n+import { formatDistance, formatTime } from '../util/formatter';\n import AddressValue from './AddressValue';\n-import PositionValue from './PositionValue';\n import BatteryIcon from './BatteryIcon';\n import RssiIcon from './RssiIcon';\n \n-const infoBoxStyle = (color) => ({\n-  display: 'flex',\n-  flexDirection: 'column',\n-  alignItems: 'center',\n-  justifyContent: 'center',\n-  padding: 10,\n-  borderRadius: 12,\n-  background: `${color}15`,\n-  border: `1px solid ${color}40`,\n-  textAlign: 'center',\n-});\n+const useStyles = makeStyles()((theme, { desktopPadding }) => ({\n+  card: {\n+    pointerEvents: 'auto',\n+    width: '100%',\n+    [theme.breakpoints.up('md')]: {\n+      width: 'auto',\n+      maxWidth: 1200, // Increased width to fit more content\n+      minHeight: 320, // Increased height to accommodate larger elements\n+      maxHeight: 420, // Allow more height\n+    },\n+    [theme.breakpoints.down('md')]: {\n+      width: '100%',\n+      maxWidth: '100vw', // Fit to screen width on mobile\n+      minWidth: '100vw', // Ensure it takes full screen width\n+      minHeight: '40vh', // Further reduced height for mobile to accommodate scrollable content\n+      maxHeight: '40vh', // Fixed height for mobile to enable scrolling\n+      margin: 0,\n+      borderRadius: theme.spacing(3), // More rounded corners for premium look\n+      boxShadow: '0px -8px 24px rgba(0,0,0,0.15)', // Enhanced shadow for premium look\n+    },\n+    borderRadius: theme.spacing(2),\n+    boxShadow: '0 8px 24px rgba(0,0,0,0.12)',\n+    display: 'flex',\n+    flexDirection: 'column',\n+    overflow: 'hidden', // Prevent any overflow\n+    [theme.breakpoints.down('md')]: {\n+      padding: theme.spacing(1), // Add padding inside the card on mobile\n+    },\n+  },\n+  header: {\n+    padding: theme.spacing(1.5),\n+    display: 'flex',\n+    justifyContent: 'space-between',\n+    alignItems: 'flex-start',\n+    backgroundColor: theme.palette.mode === 'dark'\n+      ? theme.palette.grey[900]\n+      : theme.palette.grey[100],\n+    borderBottom: `1px solid ${theme.palette.divider}`,\n+    borderRadius: theme.spacing(2, 2, 0, 0), // Rounded top corners only\n+    [theme.breakpoints.down('md')]: {\n+      position: 'sticky',\n+      top: 0,\n+      zIndex: 2,\n+      backgroundColor: theme.palette.background.paper,\n+      margin: theme.spacing(0.5, 0.5, 0, 0.5), // Add margins on mobile (top, right, bottom, left)\n+    },\n+  },\n+  headerButton: {\n+    alignSelf: 'flex-start',\n+    flexShrink: 0,\n+  },\n+  headerContent: {\n+    display: 'flex',\n+    flexDirection: 'column',\n+    alignItems: 'flex-start',\n+    gap: theme.spacing(1),\n+    flex: 1,\n+    minWidth: 0,\n+  },\n+  headerTopRow: {\n+    display: 'flex',\n+    alignItems: 'center',\n+    gap: theme.spacing(1),\n+    width: '100%',\n+    flexWrap: 'wrap', // Wrap items on small screens\n+  },\n+  deviceName: {\n+    fontWeight: 700,\n+    fontSize: '1.2rem',\n+    color: theme.palette.primary.main,\n+    whiteSpace: 'nowrap',\n+    overflow: 'hidden',\n+    textOverflow: 'ellipsis',\n+    flexGrow: 1,\n+  },\n+  vehiclePlate: {\n+    flexShrink: 0,\n+  },\n+  statusChip: {\n+    height: 24,\n+    fontSize: '0.75rem',\n+    fontWeight: 600,\n+    flexShrink: 0,\n+  },\n+  addressContainer: {\n+    display: 'flex',\n+    alignItems: 'center',\n+    gap: theme.spacing(0.5),\n+    width: '100%',\n+    minWidth: 0, // Allows flex child to shrink below content size\n+    flexWrap: 'wrap', // Allow wrapping on small screens\n+    wordBreak: 'break-word', // Break long addresses\n+    [theme.breakpoints.down('md')]: {\n+      flexWrap: 'wrap',\n+      wordBreak: 'break-word',\n+      fontSize: '0.8rem', // Slightly smaller font on mobile\n+    },\n+  },\n+  content: {\n+    padding: theme.spacing(0.5), // Reduced padding since card has padding\n+    flex: 1,\n+    [theme.breakpoints.down('md')]: {\n+      maxHeight: 'calc(40vh - 120px)', // Adjust based on header and footer heights\n+      minHeight: 0,\n+    },\n+  },\n+  mainGrid: {\n+    width: '100%',\n+    height: '100%',\n+    [theme.breakpoints.down('sm')]: {\n+      display: 'flex',\n+      flexDirection: 'column',\n+      height: 'auto',\n+    },\n+  },\n+  speedSection: {\n+    display: 'flex',\n+    flexDirection: 'row',\n+    alignItems: 'flex-start', // Align to top\n+    justifyContent: 'space-between',\n+    padding: theme.spacing(1),\n+    backgroundColor: theme.palette.mode === 'dark'\n+      ? theme.palette.grey[900]\n+      : theme.palette.grey[100],\n+    borderRadius: theme.spacing(2),\n+    margin: theme.spacing(1, 0),\n+    [theme.breakpoints.down('sm')]: {\n+      display: 'flex',\n+      flexDirection: 'column', // Keep as column for internal layout within speedSection\n+      padding: 0, // Reduce padding since container has padding\n+      alignItems: 'flex-start',\n+      flex: '0 0 auto', // Prevent shrinking, allow intrinsic width for horizontal scroll\n+      minWidth: 'fit-content', // Ensure minimum width based on content\n+    },\n+  },\n+  speedGaugeContainer: {\n+    display: 'flex',\n+    flexDirection: 'column',\n+    alignItems: 'center',\n+    justifyContent: 'center',\n+    flex: '0 0 auto', // Don't grow on mobile\n+    padding: theme.spacing(0.5),\n+    [theme.breakpoints.down('sm')]: {\n+      flex: '0 0 auto', // Don't grow on mobile\n+      maxWidth: 120, // Limit width to prevent overflow\n+    },\n+  },\n+  mobileDataBox: {\n+    display: 'flex',\n+    flexDirection: 'column',\n+    alignItems: 'flex-start',\n+    padding: theme.spacing(1.5),\n+    backgroundColor: theme.palette.mode === 'dark'\n+      ? theme.palette.grey[800]\n+      : theme.palette.grey[200],\n+    borderRadius: theme.spacing(2),\n+    minWidth: 140,\n+    maxWidth: 160, // Limit width to prevent overflow\n+    boxShadow: '0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06)', // Tailwind-inspired shadow\n+    [theme.breakpoints.up('md')]: {\n+      display: 'none', // Hide on desktop\n+    },\n+  },\n+  mobileDataItem: {\n+    display: 'flex',\n+    alignItems: 'center',\n+    gap: theme.spacing(0.75),\n+    marginBottom: theme.spacing(1),\n+    padding: theme.spacing(0.25, 0.5),\n+    borderRadius: theme.spacing(1),\n+    backgroundColor: theme.palette.mode === 'dark'\n+      ? theme.palette.grey[700]\n+      : theme.palette.grey[100],\n+    '&:last-child': {\n+      marginBottom: 0,\n+    },\n+  },\n+  mobileDataValue: {\n+    fontSize: '0.75rem',\n+    fontWeight: '600',\n+    color: theme.palette.text.primary,\n+  },\n+  batteryRssiContainer: {\n+    display: 'flex',\n+    gap: theme.spacing(0.5), // More compact gap\n+    alignItems: 'center',\n+    [theme.breakpoints.down('sm')]: {\n+      flex: '0 0 auto', // Don't grow on mobile\n+      gap: theme.spacing(0.5), // Compact gap on mobile\n+    },\n+  },\n+  dataGrid: {\n+    display: 'grid',\n+    gridTemplateRows: '1fr 1fr',\n+    gap: theme.spacing(1),\n+    width: '100%',\n+    height: '100%',\n+    [theme.breakpoints.down('sm')]: {\n+      display: 'flex',\n+      flexDirection: 'row', // Change to row to make statItems scroll horizontally\n+      flex: '0 0 auto', // Prevent shrinking, allow intrinsic width for horizontal scroll\n+      padding: 0, // Reduce padding since container has padding\n+      minWidth: 'fit-content', // Ensure minimum width based on content\n+    },\n+  },\n+  dataRow: {\n+    display: 'flex',\n+    gap: theme.spacing(1),\n+    [theme.breakpoints.down('sm')]: {\n+      flexWrap: 'nowrap',\n+      width: 'max-content', // Allow the row to be wider than container for scrolling\n+    },\n+  },\n+  statItem: {\n+    display: 'flex',\n+    alignItems: 'center',\n+    padding: theme.spacing(0.5),\n+    backgroundColor: theme.palette.mode === 'dark'\n+      ? theme.palette.grey[800]\n+      : theme.palette.grey[50],\n+    borderRadius: theme.spacing(1.5),\n+    minWidth: 75,\n+    height: 55,\n+    justifyContent: 'center',\n+    flexDirection: 'column', // Stack icon and text vertically on mobile\n+    textAlign: 'center',\n+    boxShadow: '0 2px 4px rgba(0,0,0,0.05)', // Subtle shadow for depth\n+    [theme.breakpoints.down('sm')]: {\n+      flex: '0 0 auto', // Don't grow/shrink on mobile, allow horizontal scrolling\n+      maxWidth: 100, // Limit width on mobile to prevent overflow\n+      minWidth: 80, // Adjust minWidth to be more compact\n+      height: 60, // Adjust height to be more compact\n+      minHeight: 60, // Ensure minimum height on mobile\n+      padding: theme.spacing(0.25), // Reduce padding\n+    },\n+    [theme.breakpoints.up('md')]: {\n+      flexDirection: 'row', // Row layout on desktop\n+      justifyContent: 'flex-start',\n+      textAlign: 'left',\n+      height: 80,\n+      minWidth: 100,\n+      padding: theme.spacing(0.75),\n+    },\n+  },\n+  statIcon: {\n+    marginRight: theme.spacing(1),\n+    fontSize: '1.5rem',\n+    minWidth: 24,\n+    display: 'flex',\n+    alignItems: 'center',\n+    justifyContent: 'center',\n+    [theme.breakpoints.down('sm')]: {\n+      marginRight: 0,\n+      marginBottom: theme.spacing(0.25), // Reduce margin\n+      fontSize: '1rem', // Smaller icon size\n+    },\n+  },\n+  statLabel: {\n+    fontSize: '0.65rem',\n+    color: theme.palette.text.secondary,\n+    whiteSpace: 'nowrap',\n+    marginBottom: theme.spacing(0.2),\n+    [theme.breakpoints.down('sm')]: {\n+      fontSize: '0.6rem', // Tiny text\n+      marginBottom: 0,\n+    },\n+  },\n+  statValue: {\n+    fontWeight: 600,\n+    fontSize: '0.8rem',\n+    [theme.breakpoints.down('sm')]: {\n+      fontSize: '0.7rem', // Tiny text\n+    },\n+  },\n+  statContainer: {\n+    padding: theme.spacing(0.5),\n+    flex: '1 1 120px', // Allow flex-grow, flex-shrink, and set a basis\n+    minWidth: 120,\n+  },\n+  actions: {\n+    justifyContent: 'space-around', // Space out actions evenly on mobile\n+    padding: theme.spacing(1, 1.5),\n+    backgroundColor: theme.palette.mode === 'dark'\n+      ? theme.palette.grey[900]\n+      : theme.palette.grey[100],\n+    borderTop: `1px solid ${theme.palette.divider}`,\n+    [theme.breakpoints.down('md')]: {\n+      position: 'sticky',\n+      bottom: 0,\n+      zIndex: 2,\n+      backgroundColor: theme.palette.background.paper,\n+      margin: theme.spacing(0, 0.5, 0.5, 0.5), // Add margins on mobile (top, right, bottom, left)\n+    },\n+  },\n+  root: {\n+    pointerEvents: 'none',\n+    position: 'fixed',\n+    zIndex: 5,\n+    left: '50%',\n+    transform: 'translateX(-50%)',\n+    [theme.breakpoints.up('md')]: {\n+      left: `calc(50% + ${desktopPadding} / 2)`,\n+      bottom: theme.spacing(3),\n+      width: 'auto',\n+    },\n+    [theme.breakpoints.down('md')]: {\n+      bottom: theme.spacing(10), // Increased margin from bottom to move component higher\n+      left: theme.spacing(2), // Increased left margin\n+      right: theme.spacing(2), // Increased right margin\n+      width: `calc(100% - ${theme.spacing(4)})`, // Account for left and right margins (2 units each side = 4 units total)\n+      transform: 'none',\n+      maxWidth: 'none',\n+      borderRadius: theme.spacing(2), // Rounded all corners\n+      boxShadow: '0px -4px 12px rgba(0,0,0,0.1)', // Shadow facing upward\n+    },\n+  },\n+  statusChip: {\n+    height: 24,\n+    fontSize: '0.75rem',\n+    fontWeight: 600,\n+  },\n+  batteryContainer: {\n+    display: 'flex',\n+    alignItems: 'center',\n+    gap: theme.spacing(1),\n+  },\n+  horizontalScrollContainer: {\n+    display: 'flex',\n+    flexDirection: 'row',\n+    overflowX: 'auto',\n+    padding: theme.spacing(1),\n+    gap: theme.spacing(1),\n+    width: '100%',\n+    maxWidth: '100%', // Use 100% of container width instead of viewport\n+    '&::-webkit-scrollbar': {\n+      display: 'none' // Hide scrollbar for cleaner look\n+    },\n+    scrollbarWidth: 'none', // Firefox\n+    msOverflowStyle: 'none', // IE/Edge\n+    [theme.breakpoints.up('sm')]: {\n+      overflowX: 'visible', // Disable horizontal scrolling on desktop\n+      flexDirection: 'row', // Use original layout on desktop\n+    }\n+  },\n+  desktopLayout: {\n+    display: 'grid',\n+    gridTemplateColumns: '140px 1fr',\n+    gap: theme.spacing(1),\n+    width: '100%',\n+    height: '100%',\n+    [theme.breakpoints.down('sm')]: {\n+      display: 'none', // Hide on mobile\n+    }\n+  },\n+}));\n \n-const SpeedGauge = ({ speed }) => {\n-  const percentage = Math.min((speed || 0) / 120 * 100, 100);\n-  const circumference = 2 * Math.PI * 35;\n-  const offset = circumference - (percentage / 100) * circumference;\n+// Custom SpeedGauge Component\n+const SpeedGauge = ({ speed, maxSpeed = 120 }) => {\n+  const percentage = Math.min((speed || 0) / maxSpeed * 100, 100);\n+  const circumference = 2 * Math.PI * 35; // increased radius for larger display\n+  const strokeDasharray = circumference;\n+  const strokeDashoffset = circumference - (percentage / 100) * circumference;\n \n-  let color = '#4caf50';\n-  if (speed > 80) color = '#ff9800';\n-  if (speed > 100) color = '#f44336';\n+  // Determine color based on speed\n+  let color = '#4caf50'; // green\n+  if (speed > maxSpeed * 0.7) color = '#ff9800'; // orange\n+  if (speed > maxSpeed * 0.9) color = '#f44336'; // red\n \n   return (\n-    <Box sx={{ position: 'relative', width: 100, height: 100 }}>\n-      <svg width=\"100\" height=\"100\">\n-        <circle cx=\"50\" cy=\"50\" r=\"35\" stroke=\"#eee\" strokeWidth=\"6\" fill=\"none\" />\n+    <Box sx={{ position: 'relative', width: 80, height: 80 }}>\n+      <svg width=\"80\" height=\"80\" viewBox=\"0 0 80 80\">\n+        {/* Background circle */}\n         <circle\n-          cx=\"50\"\n-          cy=\"50\"\n+          cx=\"40\"\n+          cy=\"40\"\n           r=\"35\"\n+          fill=\"none\"\n+          stroke=\"#e0e0e0\"\n+          strokeWidth=\"5\"\n+        />\n+        {/* Progress circle */}\n+        <circle\n+          cx=\"40\"\n+          cy=\"40\"\n+          r=\"35\"\n+          fill=\"none\"\n           stroke={color}\n-          strokeWidth=\"6\"\n-          fill=\"none\"\n-          strokeDasharray={circumference}\n-          strokeDashoffset={offset}\n+          strokeWidth=\"5\"\n           strokeLinecap=\"round\"\n-          transform=\"rotate(-90 50 50)\"\n+          strokeDasharray={strokeDasharray}\n+          strokeDashoffset={strokeDashoffset}\n+          transform=\"rotate(-90 40 40)\"\n+          style={{ transition: 'stroke-dashoffset 0.5s ease-in-out' }}\n         />\n       </svg>\n-      <Box sx={{\n-        position: 'absolute',\n-        top: '50%',\n-        left: '50%',\n-        transform: 'translate(-50%, -50%)',\n-        textAlign: 'center'\n-      }}>\n-        <Typography variant=\"h6\" fontWeight=\"bold\">\n+      <Box\n+        sx={{\n+          position: 'absolute',\n+          top: '50%',\n+          left: '50%',\n+          transform: 'translate(-50%, -50%)',\n+          display: 'flex',\n+          flexDirection: 'column',\n+          alignItems: 'center',\n+        }}\n+      >\n+        <Typography\n+          variant=\"h6\"\n+          component=\"div\"\n+          sx={{\n+            fontWeight: 'bold',\n+            transition: 'all 0.5s ease-in-out'\n+          }}\n+        >\n           {Math.round(speed || 0)}\n         </Typography>\n-        <Typography variant=\"caption\">km/h</Typography>\n+        <Typography variant=\"caption\" component=\"div\">\n+          km/h\n+        </Typography>\n       </Box>\n     </Box>\n   );\n };\n \n-const StatusCard = ({ deviceId, position, device, onClose }) => {\n+const StatusCard = ({ deviceId, position, onClose, disableActions, desktopPadding = 0 }) => {\n+  const { classes } = useStyles({ desktopPadding });\n+  const distanceUnit = useAttributePreference('distanceUnit');\n \n+  const attributeIcons = {\n+    fixTime: <AccessTimeIcon fontSize=\"small\" style={{ color: '#2196f3' }} />,\n+    deviceTime: <AccessTimeIcon fontSize=\"small\" style={{ color: '#2196f3' }} />,\n+    serverTime: <AccessTimeIcon fontSize=\"small\" style={{ color: '#2196f3' }} />,\n+    address: <RoomIcon fontSize=\"small\" style={{ color: '#f44336' }} />,\n+    speed: <SpeedIcon fontSize=\"small\" style={{ color: '#4caf50' }} />,\n+    todayDistance: <DirectionsCarIcon fontSize=\"small\" style={{ color: '#8bc34a' }} />,\n+    todayStartTime: <AccessTimeIcon fontSize=\"small\" style={{ color: '#2196f3' }} />,\n+    totalDistance: <DirectionsCarIcon fontSize=\"small\" style={{ color: '#8bc34a' }} />,\n+    latitude: <MyLocationIcon fontSize=\"small\" />,\n+    longitude: <MyLocationIcon fontSize=\"small\" />,\n+    altitude: <TerrainIcon fontSize=\"small\" />,\n+    course: <ExploreIcon fontSize=\"small\" />,\n+    ignition: <VpnKeyIcon fontSize=\"small\" style={{ color: '#ffc107' }} />,\n+    motion: <DirectionsCarIcon fontSize=\"small\" style={{ color: '#9c27b0' }} />,\n+    odometer: <AvTimerIcon fontSize=\"small\" />,\n+    geofenceIds: <RoomIcon fontSize=\"small\" />,\n+    sat: <LocationSearchingIcon fontSize=\"small\" />,\n+    fuel: <LocalGasStationIcon fontSize=\"small\" style={{ color: '#ff9800' }} />,\n+    charge: <PowerIcon fontSize=\"small\" />,\n+    operator: <InfoOutlinedIcon fontSize=\"small\" />,\n+    alarm: <AlarmIcon fontSize=\"small\" style={{ color: '#f44336' }} />,\n+    status: <InfoOutlinedIcon fontSize=\"small\" />,\n+    protocol: <CodeIcon fontSize=\"small\" />,\n+  };\n+\n   const navigate = useNavigate();\n-  const [anchorEl, setAnchorEl] = useState(null);\n+  const dispatch = useDispatch();\n+  const t = useTranslation();\n \n-  if (!device) return null;\n+  const readonly = useRestriction('readonly');\n+  const deviceReadonly = useDeviceReadonly();\n \n-  const content = (\n-    <Card\n-      sx={{\n-        width: '100%',\n-        maxWidth: 500,\n-        borderRadius: 4,\n-        boxShadow: 4,\n-        display: 'flex',\n-        flexDirection: 'column',\n-        maxHeight: '85vh',\n-      }}\n-    >\n-      {/* HEADER */}\n-      <Box sx={{\n-        p: 2,\n-        display: 'flex',\n-        justifyContent: 'space-between',\n-        alignItems: 'flex-start',\n-        borderBottom: '1px solid #eee'\n-      }}>\n-        <Box>\n-          <Typography fontWeight=\"bold\" fontSize=\"1rem\">\n-            {device.name}\n-          </Typography>\n+  const shareDisabled = useSelector((state) => state.session.server.attributes.disableShare);\n+  const user = useSelector((state) => state.session.user);\n+  const device = useSelector((state) => state.devices.items[deviceId]);\n \n-          <Box sx={{ display: 'flex', alignItems: 'center', mt: 0.5 }}>\n-            <RoomIcon sx={{ fontSize: 16, color: 'red', mr: 0.5 }} />\n-            <Typography variant=\"caption\">\n-              <AddressValue\n-                latitude={position?.latitude}\n-                longitude={position?.longitude}\n-                originalAddress={position?.address}\n-              />\n-            </Typography>\n-          </Box>\n-        </Box>\n+  const positionAttributes = usePositionAttributes(t);\n+  const positionItems = useAttributePreference('positionItems', 'fixTime,totalDistance,course,ignition,motion,odometer');\n \n-        <IconButton size=\"small\" onClick={onClose}>\n-          <CloseIcon />\n-        </IconButton>\n-      </Box>\n+  const navigationAppLink = useAttributePreference('navigationAppLink');\n+  const navigationAppTitle = useAttributePreference('navigationAppTitle');\n \n-      {/* CONTENT */}\n-      {position && (\n-        <CardContent sx={{ overflowY: 'auto' }}>\n+  const [anchorEl, setAnchorEl] = useState(null);\n \n-          {/* SPEED */}\n-          <Box sx={{ display: 'flex', justifyContent: 'center', py: 2 }}>\n-            <SpeedGauge speed={position.speed} />\n-          </Box>\n+  const [removing, setRemoving] = useState(false);\n \n-          {/* INFO GRID */}\n-          <Box sx={{\n-            display: 'grid',\n-            gridTemplateColumns: '1fr 1fr',\n-            gap: 1,\n-            mb: 2\n-          }}>\n-            <Box sx={infoBoxStyle('#4caf50')}>\n-              <BatteryIcon batteryLevel={position.attributes?.batteryLevel} />\n-              <Typography variant=\"caption\">Battery</Typography>\n-              <Typography fontWeight=\"bold\">\n-                {position.attributes?.batteryLevel ?? '-'}%\n-              </Typography>\n-            </Box>\n+  const handleRemove = useCatch(async (removed) => {\n+    if (removed) {\n+      const response = await fetchOrThrow('/api/devices');\n+      dispatch(devicesActions.refresh(await response.json()));\n+    }\n+    setRemoving(false);\n+  });\n \n-            <Box sx={infoBoxStyle('#ff9800')}>\n-              <RssiIcon rssi={position.attributes?.rssi} />\n-              <Typography variant=\"caption\">Signal</Typography>\n-              <Typography fontWeight=\"bold\">\n-                {position.attributes?.rssi ?? '-'} dBm\n-              </Typography>\n-            </Box>\n+  const handleGeofence = useCatchCallback(async () => {\n+    const newItem = {\n+      name: t('sharedGeofence'),\n+      area: `CIRCLE (${position.latitude} ${position.longitude}, 50)`,\n+    };\n+    const response = await fetchOrThrow('/api/geofences', {\n+      method: 'POST',\n+      headers: { 'Content-Type': 'application/json' },\n+      body: JSON.stringify(newItem),\n+    });\n+    const item = await response.json();\n+    await fetchOrThrow('/api/permissions', {\n+      method: 'POST',\n+      headers: { 'Content-Type': 'application/json' },\n+      body: JSON.stringify({ deviceId: position.deviceId, geofenceId: item.id }),\n+    });\n+    navigate(`/settings/geofence/${item.id}`);\n+  }, [navigate, position]);\n \n-            <Box sx={infoBoxStyle('#2196f3')}>\n-              <DirectionsCarIcon fontSize=\"small\" />\n-              <Typography variant=\"caption\">Course</Typography>\n-              <Typography fontWeight=\"bold\">\n-                {position.course ?? '-'}\n-              </Typography>\n-            </Box>\n+  // Determine device status for chip\n+  const getStatusColor = (device, position) => {\n+    if (!position) return 'default';\n+    if (position.attributes.ignition === true) return 'success';\n+    if (position.speed > 0) return 'info';\n+    return 'warning';\n+  };\n \n-            <Box sx={infoBoxStyle('#9c27b0')}>\n-              <AccessTimeIcon fontSize=\"small\" />\n-              <Typography variant=\"caption\">Fix Time</Typography>\n-              <Typography fontWeight=\"bold\" fontSize=\"0.75rem\">\n-                {dayjs(position.fixTime).format('hh:mm A')}\n-              </Typography>\n-            </Box>\n-          </Box>\n+  const statusColor = position ? getStatusColor(device, position) : 'default';\n+  const statusText = position ?\n+    (position.attributes.ignition === true ? t('deviceEngineOn') :\n+     position.speed > 0 ? t('deviceMoving') : t('deviceStopped')) :\n+    t('deviceOffline');\n \n-          <Divider sx={{ mb: 1 }} />\n-\n-          <Link\n-            component={RouterLink}\n-            to={`/position/${position.id}`}\n-            variant=\"caption\"\n+  return (\n+    <>\n+      <div className={classes.root}>\n+        {device && (\n+          <Rnd\n+            default={{ x: 0, y: 0, width: 'auto', height: 'auto' }}\n+            enableResizing={false}\n+            dragHandleClassName=\"draggable-header\"\n+            style={{ position: 'relative' }}\n           >\n-            Show Details\n-          </Link>\n+            <Card elevation={3} className={classes.card}>\n+              <div className={`${classes.header} draggable-header`}>\n+                <Box className={classes.headerContent}>\n+                  <Box className={classes.headerTopRow}>\n+                    <Typography variant=\"h6\" className={classes.deviceName}>{device.name}</Typography>\n+                    {device.vehicle_number && (\n+                      <div className={classes.vehiclePlate}>\n+                        <VehicleNumberPlate number={device.vehicle_number} />\n+                      </div>\n+                    )}\n+                    <Chip\n+                      label={statusText}\n+                      size=\"small\"\n+                      className={classes.statusChip}\n+                      color={statusColor}\n+                      variant=\"filled\"\n+                    />\n+                  </Box>\n+                  <div className={classes.addressContainer}>\n+                    <RoomIcon fontSize=\"small\" style={{ color: '#f44336', fontSize: '1rem' }} />\n+                    <Typography variant=\"body2\" color=\"text.secondary\" noWrap={false} style={{ wordBreak: 'break-word' }}>\n+                      <AddressValue latitude={position?.latitude} longitude={position?.longitude} originalAddress={position?.address} />\n+                    </Typography>\n+                  </div>\n+                </Box>\n+                <IconButton size=\"small\" onClick={onClose} className={classes.headerButton}>\n+                  <CloseIcon />\n+                </IconButton>\n+              </div>\n+              {position && (\n+                <CardContent className={classes.content}>\n+                  <div className={classes.mainGrid}>\n+                    {/* Horizontal Scrolling Container for Speed Section and Data Section */}\n+                    <Box \n+                      className={classes.horizontalScrollContainer}\n+                    >\n+                      {/* Speed Section - Speed on left, mobile data box in center, battery/RSSI on right */}\n+                      <div className={classes.speedSection}>\n+                        {/* Speed Gauge on Left */}\n+                        <div className={classes.speedGaugeContainer}>\n+                          <Box sx={{ display: 'flex', flexDirection: 'column', alignItems: 'center', justifyContent: 'center' }}>\n+                            <Box className={classes.statIcon} sx={{ mb: 0.5 }}>\n+                              <SpeedIcon fontSize=\"small\" style={{ color: '#4caf50', fontSize: '1.2rem' }} />\n+                            </Box>\n+                            <Typography variant=\"caption\" className={classes.statLabel} sx={{ mb: 0.5 }}>{t('positionSpeed')}</Typography>\n+                            <SpeedGauge speed={position.speed} />\n+                          </Box>\n+                        </div>\n \n-        </CardContent>\n-      )}\n+                        {/* Mobile Data Box - Battery, RSSI, Distance, and Time */}\n+                        <div className={classes.mobileDataBox}>\n+                          {/* Battery Level */}\n+                          <div className={classes.mobileDataItem}>\n+                            <BatteryIcon batteryLevel={position.attributes.batteryLevel} style={{ fontSize: '1rem', color: '#4caf50' }} />\n+                            <Typography variant=\"caption\" className={classes.mobileDataValue}>\n+                              {position.attributes.batteryLevel !== undefined ? `${position.attributes.batteryLevel}%` : '-'}\n+                            </Typography>\n+                          </div>\n \n-      {/* ACTIONS */}\n-      <CardActions sx={{ justifyContent: 'space-around', borderTop: '1px solid #eee' }}>\n-        <Tooltip title=\"Map Options\">\n-          <IconButton onClick={(e) => setAnchorEl(e.currentTarget)}>\n-            <TuneIcon />\n-          </IconButton>\n-        </Tooltip>\n+                          {/* RSSI */}\n+                          <div className={classes.mobileDataItem}>\n+                            <RssiIcon rssi={position.attributes.rssi} style={{ fontSize: '1rem', color: '#ff9800' }} />\n+                            <Typography variant=\"caption\" className={classes.mobileDataValue}>\n+                              {position.attributes.rssi !== undefined ? `${position.attributes.rssi} dBm` : '-'}\n+                            </Typography>\n+                          </div>\n \n-        <Tooltip title=\"Replay\">\n-          <IconButton onClick={() => navigate(`/replay?deviceId=${deviceId}`)}>\n-            <RouteIcon />\n-          </IconButton>\n-        </Tooltip>\n+                          {/* Today Distance */}\n+                          {device.todayDistance !== undefined && (\n+                            <div className={classes.mobileDataItem}>\n+                              <DirectionsCarIcon fontSize=\"small\" style={{ fontSize: '1rem', color: '#4caf50' }} />\n+                              <Typography variant=\"caption\" className={classes.mobileDataValue}>\n+                                {formatDistance(device.todayDistance, distanceUnit, t)}\n+                              </Typography>\n+                            </div>\n+                          )}\n \n-        <Tooltip title=\"Command\">\n-          <IconButton onClick={() => navigate(`/settings/device/${deviceId}/command`)}>\n-            <SendIcon />\n-          </IconButton>\n-        </Tooltip>\n+                          {/* Today Start Time */}\n+                          {device.todayStartTime !== undefined && (\n+                            <div className={classes.mobileDataItem}>\n+                              <AccessTimeIcon fontSize=\"small\" style={{ fontSize: '1rem', color: '#2196f3' }} />\n+                              <Typography variant=\"caption\" className={classes.mobileDataValue}>\n+                                {formatTime(device.todayStartTime, 'seconds')}\n+                              </Typography>\n+                            </div>\n+                          )}\n+                        </div>\n \n-        <Tooltip title=\"Edit\">\n-          <IconButton onClick={() => navigate(`/settings/device/${deviceId}`)}>\n-            <EditIcon />\n-          </IconButton>\n-        </Tooltip>\n+                        {/* Removed duplicate battery and RSSI icons from right side */}\n+                      </div>\n \n-        <Tooltip title=\"Delete\">\n-          <IconButton>\n-            <DeleteIcon />\n-          </IconButton>\n-        </Tooltip>\n-      </CardActions>\n+                      {/* Data Section - Additional Position Items Only */}\n+                      <div className={classes.dataGrid}>\n+                        {/* Additional Position Items Blocks */}\n+                        <div className={classes.dataRow}>\n+                          {positionItems.split(',').map((key) => {\n+                            // Skip the address, speed, batteryLevel, rssi, todayDistance, and todayStartTime fields to prevent duplicate display\n+                            if (key.trim() === 'address' || key.trim() === 'speed' ||\n+                                key.trim() === 'batteryLevel' || key.trim() === 'rssi' ||\n+                                key.trim() === 'todayDistance' || key.trim() === 'todayStartTime') return null;\n+                            if (!position.hasOwnProperty(key) && !position.attributes.hasOwnProperty(key)) return null;\n \n-      <Menu anchorEl={anchorEl} open={Boolean(anchorEl)} onClose={() => setAnchorEl(null)}>\n-        <MenuItem component=\"a\" target=\"_blank\"\n-          href={`https://www.google.com/maps/search/?api=1&query=${position?.latitude}%2C${position?.longitude}`}>\n-          Open in Google Maps\n-        </MenuItem>\n-      </Menu>\n-    </Card>\n+                            return (\n+                              <div key={key} className={classes.statContainer} style={{ flex: '0 0 auto' }}>\n+                                <div className={classes.statItem}>\n+                                  {attributeIcons[key] && (\n+                                    <div className={classes.statIcon}>{attributeIcons[key]}</div>\n+                                  )}\n+                                  <Box>\n+                                    <Typography variant=\"caption\" className={classes.statLabel}>\n+                                      {positionAttributes[key]?.name || key}\n+                                    </Typography>\n+                                    {(() => {\n+                                      if (key === 'fixTime' || key === 'deviceTime' || key === 'serverTime') {\n+                                        return (\n+                                          <Box sx={{ display: 'flex', flexDirection: 'column', width: '100%', mt: 0.2 }}>\n+                                            <Box\n+                                              sx={{\n+                                                backgroundColor: '#e3f2fd', // Light Blue\n+                                                color: '#1e88e5', // Darker Blue Text\n+                                                padding: '1px 2px',\n+                                                borderRadius: '3px',\n+                                                textAlign: 'center',\n+                                                fontSize: '0.6rem',\n+                                              }}\n+                                            >\n+                                              <Typography variant=\"caption\" sx={{ display: 'block', fontWeight: 'bold', fontSize: '0.6rem' }}>\n+                                                {dayjs(position[key]).format('DD/MMM/YYYY')}\n+                                              </Typography>\n+                                            </Box>\n+                                            <Box\n+                                              sx={{\n+                                                backgroundColor: '#90caf9', // Medium Blue\n+                                                color: '#0d47a1', // Darkest Blue Text\n+                                                padding: '1px 2px',\n+                                                borderRadius: '3px',\n+                                                textAlign: 'center',\n+                                                fontSize: '0.6rem',\n+                                                mt: 0.1,\n+                                              }}\n+                                            >\n+                                              <Typography variant=\"caption\" sx={{ display: 'block', fontWeight: 'bold', fontSize: '0.6rem' }}>\n+                                                {dayjs(position[key]).format('hh:mm A')}\n+                                              </Typography>\n+                                            </Box>\n+                                          </Box>\n+                                        );\n+                                      } else {\n+                                        return (\n+                                          <Typography\n+                                            variant=\"body2\"\n+                                            className={classes.statValue}\n+                                            sx={{\n+                                              fontSize: (key.trim() === 'fixTime' || key.trim() === 'deviceTime' || key.trim() === 'serverTime')\n+                                                ? '0.6rem' : '0.8rem'\n+                                            }}\n+                                          >\n+                                            <PositionValue\n+                                              position={position}\n+                                              property={position.hasOwnProperty(key) ? key : null}\n+                                              attribute={position.hasOwnProperty(key) ? null : key}\n+                                            />\n+                                          </Typography>\n+                                        );\n+                                      }\n+                                    })()}\n+                                  </Box>\n+                                </div>\n+                              </div>\n+                            );\n+                          })}\n+                        </div>\n+                      </div>\n+                    </Box>\n+                    \n+                    <Box sx={{ mt: 1, display: 'flex', justifyContent: 'flex-end' }}>\n+                      <Link component={RouterLink} underline=\"hover\" to={`/position/${position.id}`} variant=\"caption\" color=\"primary\">\n+                        {t('sharedShowDetails')}\n+                      </Link>\n+                    </Box>\n+                  </div>\n+                </CardContent>\n+              )}\n+              <CardActions classes={{ root: classes.actions }} disableSpacing>\n+                <Tooltip title={t('mapOptions')}>\n+                  <IconButton size=\"small\" onClick={(e) => setAnchorEl(e.currentTarget)} disabled={!position}>\n+                    <TuneIcon style={{ color: '#2196f3' }} />\n+                  </IconButton>\n+                </Tooltip>\n+                <Tooltip title={t('reportReplay')}>\n+                  <IconButton size=\"small\" onClick={() => navigate(`/replay?deviceId=${deviceId}`)} disabled={disableActions || !position}>\n+                    <RouteIcon style={{ color: '#4caf50' }} />\n+                  </IconButton>\n+                </Tooltip>\n+                <Tooltip title={t('commandTitle')}>\n+                  <IconButton size=\"small\" onClick={() => navigate(`/settings/device/${deviceId}/command`)} disabled={disableActions}>\n+                    <SendIcon style={{ color: '#ff9800' }} />\n+                  </IconButton>\n+                </Tooltip>\n+                <Tooltip title={t('sharedEdit')}>\n+                  <IconButton size=\"small\" onClick={() => navigate(`/settings/device/${deviceId}`)} disabled={disableActions || deviceReadonly}>\n+                    <EditIcon style={{ color: '#9c27b0' }} />\n+                  </IconButton>\n+                </Tooltip>\n+                <Tooltip title={t('sharedRemove')}>\n+                  <IconButton size=\"small\" onClick={() => setRemoving(true)} disabled={disableActions || deviceReadonly}>\n+                    <DeleteIcon style={{ color: '#f44336' }} />\n+                  </IconButton>\n+                </Tooltip>\n+              </CardActions>\n+            </Card>\n+          </Rnd>\n+        )}\n+      </div>\n+      {position && (\n+        <Menu anchorEl={anchorEl} open={Boolean(anchorEl)} onClose={() => setAnchorEl(null)}>\n+          {!readonly && <MenuItem onClick={handleGeofence}>{t('sharedCreateGeofence')}</MenuItem>}\n+          <MenuItem component=\"a\" target=\"_blank\" href={`https://www.google.com/maps/search/?api=1&query=${position.latitude}%2C${position.longitude}`}>{t('linkGoogleMaps')}</MenuItem>\n+          <MenuItem component=\"a\" target=\"_blank\" href={`http://maps.apple.com/?ll=${position.latitude},${position.longitude}`}>{t('linkAppleMaps')}</MenuItem>\n+          <MenuItem component=\"a\" target=\"_blank\" href={`https://www.google.com/maps/@?api=1&map_action=pano&viewpoint=${position.latitude}%2C${position.longitude}&heading=${position.course}`}>{t('linkStreetView')}</MenuItem>\n+          {navigationAppTitle && <MenuItem component=\"a\" target=\"_blank\" href={navigationAppLink.replace('{latitude}', position.latitude).replace('{longitude}', position.longitude)}>{navigationAppTitle}</MenuItem>}\n+          {!shareDisabled && !user.temporary && (\n+            <MenuItem onClick={() => navigate(`/settings/device/${deviceId}/share`)}><Typography color=\"secondary\">{t('deviceShare')}</Typography></MenuItem>\n+          )}\n+        </Menu>\n+      )}\n+      <RemoveDialog\n+        open={removing}\n+        endpoint=\"devices\"\n+        itemId={deviceId}\n+        onResult={(removed) => handleRemove(removed)}\n+      />\n+    </>\n   );\n-\n-  return (\n-    <Box sx={{\n-      position: 'fixed',\n-      bottom: 80,\n-      left: 16,\n-      right: 16,\n-      zIndex: 1000,\n-      display: 'flex',\n-      justifyContent: 'center'\n-    }}>\n-      {window.innerWidth > 900 ? (\n-        <Rnd enableResizing={false}>\n-          {content}\n-        </Rnd>\n-      ) : content}\n-    </Box>\n-  );\n };\n \n export default StatusCard;\n"
                },
                {
                    "date": 1771001538348,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -190,12 +190,12 @@\n     borderRadius: theme.spacing(2),\n     margin: theme.spacing(1, 0),\n     [theme.breakpoints.down('sm')]: {\n       display: 'flex',\n-      flexDirection: 'column', // Keep as column for internal layout within speedSection\n+      flexDirection: 'row',\n       padding: 0, // Reduce padding since container has padding\n       alignItems: 'flex-start',\n-      flex: '0 0 auto', // Prevent shrinking, allow intrinsic width for horizontal scroll\n+      flex: '0 0 auto', // Don't grow on mobile\n       minWidth: 'fit-content', // Ensure minimum width based on content\n     },\n   },\n   speedGaugeContainer: {\n@@ -261,10 +261,10 @@\n     width: '100%',\n     height: '100%',\n     [theme.breakpoints.down('sm')]: {\n       display: 'flex',\n-      flexDirection: 'row', // Change to row to make statItems scroll horizontally\n-      flex: '0 0 auto', // Prevent shrinking, allow intrinsic width for horizontal scroll\n+      flexDirection: 'row',\n+      flex: '0 0 auto', // Don't grow on mobile\n       padding: 0, // Reduce padding since container has padding\n       minWidth: 'fit-content', // Ensure minimum width based on content\n     },\n   },\n@@ -292,12 +292,10 @@\n     boxShadow: '0 2px 4px rgba(0,0,0,0.05)', // Subtle shadow for depth\n     [theme.breakpoints.down('sm')]: {\n       flex: '0 0 auto', // Don't grow/shrink on mobile, allow horizontal scrolling\n       maxWidth: 100, // Limit width on mobile to prevent overflow\n-      minWidth: 80, // Adjust minWidth to be more compact\n-      height: 60, // Adjust height to be more compact\n-      minHeight: 60, // Ensure minimum height on mobile\n-      padding: theme.spacing(0.25), // Reduce padding\n+      height: 70, // Increase height on mobile for better touch targets\n+      minHeight: 70, // Ensure minimum height on mobile\n     },\n     [theme.breakpoints.up('md')]: {\n       flexDirection: 'row', // Row layout on desktop\n       justifyContent: 'flex-start',\n@@ -315,28 +313,20 @@\n     alignItems: 'center',\n     justifyContent: 'center',\n     [theme.breakpoints.down('sm')]: {\n       marginRight: 0,\n-      marginBottom: theme.spacing(0.25), // Reduce margin\n-      fontSize: '1rem', // Smaller icon size\n+      marginBottom: theme.spacing(0.5),\n     },\n   },\n   statLabel: {\n     fontSize: '0.65rem',\n     color: theme.palette.text.secondary,\n     whiteSpace: 'nowrap',\n     marginBottom: theme.spacing(0.2),\n-    [theme.breakpoints.down('sm')]: {\n-      fontSize: '0.6rem', // Tiny text\n-      marginBottom: 0,\n-    },\n   },\n   statValue: {\n     fontWeight: 600,\n     fontSize: '0.8rem',\n-    [theme.breakpoints.down('sm')]: {\n-      fontSize: '0.7rem', // Tiny text\n-    },\n   },\n   statContainer: {\n     padding: theme.spacing(0.5),\n     flex: '1 1 120px', // Allow flex-grow, flex-shrink, and set a basis\n"
                },
                {
                    "date": 1771005805862,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -74,10 +74,10 @@\n       maxHeight: 420, // Allow more height\n     },\n     [theme.breakpoints.down('md')]: {\n       width: '100%',\n-      maxWidth: '100vw', // Fit to screen width on mobile\n-      minWidth: '100vw', // Ensure it takes full screen width\n+      maxWidth: `calc(100vw - ${theme.spacing(2)} * 2)`, // Fit to screen width minus padding on mobile\n+      minWidth: `calc(100vw - ${theme.spacing(2)} * 2)`, // Ensure it takes appropriate screen width minus padding\n       minHeight: '40vh', // Further reduced height for mobile to accommodate scrollable content\n       maxHeight: '40vh', // Fixed height for mobile to enable scrolling\n       margin: 0,\n       borderRadius: theme.spacing(3), // More rounded corners for premium look\n@@ -120,15 +120,18 @@\n     alignItems: 'flex-start',\n     gap: theme.spacing(1),\n     flex: 1,\n     minWidth: 0,\n+    width: '100%', // Ensure it doesn't exceed container width\n+    overflow: 'hidden', // Prevent overflow\n   },\n   headerTopRow: {\n     display: 'flex',\n     alignItems: 'center',\n     gap: theme.spacing(1),\n     width: '100%',\n     flexWrap: 'wrap', // Wrap items on small screens\n+    overflow: 'hidden', // Prevent overflow\n   },\n   deviceName: {\n     fontWeight: 700,\n     fontSize: '1.2rem',\n@@ -154,8 +157,9 @@\n     width: '100%',\n     minWidth: 0, // Allows flex child to shrink below content size\n     flexWrap: 'wrap', // Allow wrapping on small screens\n     wordBreak: 'break-word', // Break long addresses\n+    overflow: 'hidden', // Prevent overflow\n     [theme.breakpoints.down('md')]: {\n       flexWrap: 'wrap',\n       wordBreak: 'break-word',\n       fontSize: '0.8rem', // Slightly smaller font on mobile\n@@ -163,20 +167,24 @@\n   },\n   content: {\n     padding: theme.spacing(0.5), // Reduced padding since card has padding\n     flex: 1,\n+    overflow: 'hidden', // Prevent any overflow from content\n     [theme.breakpoints.down('md')]: {\n       maxHeight: 'calc(40vh - 120px)', // Adjust based on header and footer heights\n       minHeight: 0,\n+      overflowX: 'hidden', // Ensure no horizontal overflow on mobile\n     },\n   },\n   mainGrid: {\n     width: '100%',\n     height: '100%',\n+    overflow: 'hidden', // Prevent any overflow from children\n     [theme.breakpoints.down('sm')]: {\n       display: 'flex',\n       flexDirection: 'column',\n       height: 'auto',\n+      width: '100%', // Ensure it stays within parent bounds\n     },\n   },\n   speedSection: {\n     display: 'flex',\n@@ -188,15 +196,19 @@\n       ? theme.palette.grey[900]\n       : theme.palette.grey[100],\n     borderRadius: theme.spacing(2),\n     margin: theme.spacing(1, 0),\n+    width: '100%', // Ensure it stays within parent bounds\n+    overflow: 'hidden', // Prevent any overflow\n     [theme.breakpoints.down('sm')]: {\n       display: 'flex',\n       flexDirection: 'row',\n       padding: 0, // Reduce padding since container has padding\n       alignItems: 'flex-start',\n       flex: '0 0 auto', // Don't grow on mobile\n-      minWidth: 'fit-content', // Ensure minimum width based on content\n+      minWidth: 0, // Allow shrinking below content size\n+      width: '100%', // Ensure it stays within parent bounds\n+      overflow: 'hidden', // Prevent any overflow on mobile\n     },\n   },\n   speedGaugeContainer: {\n     display: 'flex',\n@@ -206,9 +218,10 @@\n     flex: '0 0 auto', // Don't grow on mobile\n     padding: theme.spacing(0.5),\n     [theme.breakpoints.down('sm')]: {\n       flex: '0 0 auto', // Don't grow on mobile\n-      maxWidth: 120, // Limit width to prevent overflow\n+      maxWidth: 100, // Limit width to prevent overflow\n+      minWidth: 90, // Ensure minimum width but allow to be smaller\n     },\n   },\n   mobileDataBox: {\n     display: 'flex',\n@@ -218,10 +231,10 @@\n     backgroundColor: theme.palette.mode === 'dark'\n       ? theme.palette.grey[800]\n       : theme.palette.grey[200],\n     borderRadius: theme.spacing(2),\n-    minWidth: 140,\n-    maxWidth: 160, // Limit width to prevent overflow\n+    minWidth: 120,\n+    maxWidth: '40%', // Limit width to 40% of container to prevent overflow\n     boxShadow: '0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06)', // Tailwind-inspired shadow\n     [theme.breakpoints.up('md')]: {\n       display: 'none', // Hide on desktop\n     },\n@@ -259,22 +272,28 @@\n     gridTemplateRows: '1fr 1fr',\n     gap: theme.spacing(1),\n     width: '100%',\n     height: '100%',\n+    overflow: 'hidden', // Prevent any overflow\n     [theme.breakpoints.down('sm')]: {\n       display: 'flex',\n       flexDirection: 'row',\n       flex: '0 0 auto', // Don't grow on mobile\n       padding: 0, // Reduce padding since container has padding\n-      minWidth: 'fit-content', // Ensure minimum width based on content\n+      minWidth: 0, // Allow shrinking below content size\n+      width: '100%', // Ensure it stays within parent bounds\n+      overflow: 'hidden', // Prevent any overflow on mobile\n     },\n   },\n   dataRow: {\n     display: 'flex',\n     gap: theme.spacing(1),\n+    overflow: 'hidden', // Prevent any overflow\n     [theme.breakpoints.down('sm')]: {\n       flexWrap: 'nowrap',\n-      width: 'max-content', // Allow the row to be wider than container for scrolling\n+      width: '100%', // Keep within container bounds\n+      overflow: 'hidden', // Prevent any overflow\n+      minWidth: 0, // Allow shrinking\n     },\n   },\n   statItem: {\n     display: 'flex',\n@@ -291,11 +310,12 @@\n     textAlign: 'center',\n     boxShadow: '0 2px 4px rgba(0,0,0,0.05)', // Subtle shadow for depth\n     [theme.breakpoints.down('sm')]: {\n       flex: '0 0 auto', // Don't grow/shrink on mobile, allow horizontal scrolling\n-      maxWidth: 100, // Limit width on mobile to prevent overflow\n+      maxWidth: 90, // Limit width on mobile to prevent overflow\n       height: 70, // Increase height on mobile for better touch targets\n       minHeight: 70, // Ensure minimum height on mobile\n+      minWidth: 80, // Ensure minimum width but allow to be smaller than desktop\n     },\n     [theme.breakpoints.up('md')]: {\n       flexDirection: 'row', // Row layout on desktop\n       justifyContent: 'flex-start',\n@@ -328,10 +348,16 @@\n     fontSize: '0.8rem',\n   },\n   statContainer: {\n     padding: theme.spacing(0.5),\n-    flex: '1 1 120px', // Allow flex-grow, flex-shrink, and set a basis\n-    minWidth: 120,\n+    flex: '1 1 auto', // Allow flex-grow, flex-shrink, and set to auto\n+    minWidth: 0, // Allow shrinking below 120px on mobile\n+    width: '100%', // Take full width of container\n+    [theme.breakpoints.down('sm')]: {\n+      flex: '0 0 auto', // On mobile, don't grow/shrink but allow auto sizing\n+      minWidth: 80, // Minimum width for mobile\n+      maxWidth: '100%', // Ensure it doesn't exceed container width\n+    },\n   },\n   actions: {\n     justifyContent: 'space-around', // Space out actions evenly on mobile\n     padding: theme.spacing(1, 1.5),\n@@ -359,13 +385,13 @@\n       width: 'auto',\n     },\n     [theme.breakpoints.down('md')]: {\n       bottom: theme.spacing(10), // Increased margin from bottom to move component higher\n-      left: theme.spacing(2), // Increased left margin\n-      right: theme.spacing(2), // Increased right margin\n-      width: `calc(100% - ${theme.spacing(4)})`, // Account for left and right margins (2 units each side = 4 units total)\n+      left: theme.spacing(1), // Reduced left margin to prevent overflow\n+      right: theme.spacing(1), // Reduced right margin to prevent overflow\n+      width: `calc(100% - ${theme.spacing(2)})`, // Account for left and right margins (1 unit each side = 2 units total)\n       transform: 'none',\n-      maxWidth: 'none',\n+      maxWidth: '100vw', // Ensure it doesn't exceed viewport width\n       borderRadius: theme.spacing(2), // Rounded all corners\n       boxShadow: '0px -4px 12px rgba(0,0,0,0.1)', // Shadow facing upward\n     },\n   },\n@@ -386,24 +412,32 @@\n     padding: theme.spacing(1),\n     gap: theme.spacing(1),\n     width: '100%',\n     maxWidth: '100%', // Use 100% of container width instead of viewport\n+    boxSizing: 'border-box', // Ensure padding is included in width calculation\n     '&::-webkit-scrollbar': {\n       display: 'none' // Hide scrollbar for cleaner look\n     },\n     scrollbarWidth: 'none', // Firefox\n     msOverflowStyle: 'none', // IE/Edge\n     [theme.breakpoints.up('sm')]: {\n       overflowX: 'visible', // Disable horizontal scrolling on desktop\n       flexDirection: 'row', // Use original layout on desktop\n+    },\n+    [theme.breakpoints.down('sm')]: {\n+      overflowX: 'hidden', // Prevent horizontal scrolling on mobile\n+      width: '100%', // Ensure exact width on mobile\n+      maxWidth: '100%', // Prevent exceeding container\n+      flexWrap: 'nowrap', // Prevent wrapping which could cause issues\n     }\n   },\n   desktopLayout: {\n     display: 'grid',\n     gridTemplateColumns: '140px 1fr',\n     gap: theme.spacing(1),\n     width: '100%',\n     height: '100%',\n+    overflow: 'hidden', // Prevent any overflow\n     [theme.breakpoints.down('sm')]: {\n       display: 'none', // Hide on mobile\n     }\n   },\n@@ -681,9 +715,9 @@\n                                 key.trim() === 'todayDistance' || key.trim() === 'todayStartTime') return null;\n                             if (!position.hasOwnProperty(key) && !position.attributes.hasOwnProperty(key)) return null;\n \n                             return (\n-                              <div key={key} className={classes.statContainer} style={{ flex: '0 0 auto' }}>\n+                              <div key={key} className={classes.statContainer}>\n                                 <div className={classes.statItem}>\n                                   {attributeIcons[key] && (\n                                     <div className={classes.statIcon}>{attributeIcons[key]}</div>\n                                   )}\n@@ -704,9 +738,9 @@\n                                                 textAlign: 'center',\n                                                 fontSize: '0.6rem',\n                                               }}\n                                             >\n-                                              <Typography variant=\"caption\" sx={{ display: 'block', fontWeight: 'bold', fontSize: '0.6rem' }}>\n+                                              <Typography variant=\"caption\" sx={{ display: 'block', fontWeight: 'bold', fontSize: '0.6rem', wordBreak: 'break-word' }}>\n                                                 {dayjs(position[key]).format('DD/MMM/YYYY')}\n                                               </Typography>\n                                             </Box>\n                                             <Box\n@@ -719,9 +753,9 @@\n                                                 fontSize: '0.6rem',\n                                                 mt: 0.1,\n                                               }}\n                                             >\n-                                              <Typography variant=\"caption\" sx={{ display: 'block', fontWeight: 'bold', fontSize: '0.6rem' }}>\n+                                              <Typography variant=\"caption\" sx={{ display: 'block', fontWeight: 'bold', fontSize: '0.6rem', wordBreak: 'break-word' }}>\n                                                 {dayjs(position[key]).format('hh:mm A')}\n                                               </Typography>\n                                             </Box>\n                                           </Box>\n@@ -732,9 +766,10 @@\n                                             variant=\"body2\"\n                                             className={classes.statValue}\n                                             sx={{\n                                               fontSize: (key.trim() === 'fixTime' || key.trim() === 'deviceTime' || key.trim() === 'serverTime')\n-                                                ? '0.6rem' : '0.8rem'\n+                                                ? '0.6rem' : '0.8rem',\n+                                              wordBreak: 'break-word'\n                                             }}\n                                           >\n                                             <PositionValue\n                                               position={position}\n@@ -753,10 +788,22 @@\n                         </div>\n                       </div>\n                     </Box>\n                     \n-                    <Box sx={{ mt: 1, display: 'flex', justifyContent: 'flex-end' }}>\n-                      <Link component={RouterLink} underline=\"hover\" to={`/position/${position.id}`} variant=\"caption\" color=\"primary\">\n+                    <Box sx={{ mt: 1, display: 'flex', justifyContent: 'flex-end', width: '100%', overflow: 'hidden' }}>\n+                      <Link \n+                        component={RouterLink} \n+                        underline=\"hover\" \n+                        to={`/position/${position.id}`} \n+                        variant=\"caption\" \n+                        color=\"primary\"\n+                        sx={{ \n+                          overflow: 'hidden', \n+                          textOverflow: 'ellipsis', \n+                          whiteSpace: 'nowrap',\n+                          maxWidth: '100%'\n+                        }}\n+                      >\n                         {t('sharedShowDetails')}\n                       </Link>\n                     </Box>\n                   </div>\n"
                },
                {
                    "date": 1771006295546,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -196,19 +196,17 @@\n       ? theme.palette.grey[900]\n       : theme.palette.grey[100],\n     borderRadius: theme.spacing(2),\n     margin: theme.spacing(1, 0),\n-    width: '100%', // Ensure it stays within parent bounds\n-    overflow: 'hidden', // Prevent any overflow\n     [theme.breakpoints.down('sm')]: {\n       display: 'flex',\n       flexDirection: 'row',\n       padding: 0, // Reduce padding since container has padding\n       alignItems: 'flex-start',\n       flex: '0 0 auto', // Don't grow on mobile\n       minWidth: 0, // Allow shrinking below content size\n       width: '100%', // Ensure it stays within parent bounds\n-      overflow: 'hidden', // Prevent any overflow on mobile\n+      overflowX: 'auto', // Enable horizontal scrolling if needed\n     },\n   },\n   speedGaugeContainer: {\n     display: 'flex',\n@@ -272,27 +270,25 @@\n     gridTemplateRows: '1fr 1fr',\n     gap: theme.spacing(1),\n     width: '100%',\n     height: '100%',\n-    overflow: 'hidden', // Prevent any overflow\n     [theme.breakpoints.down('sm')]: {\n       display: 'flex',\n       flexDirection: 'row',\n       flex: '0 0 auto', // Don't grow on mobile\n       padding: 0, // Reduce padding since container has padding\n       minWidth: 0, // Allow shrinking below content size\n       width: '100%', // Ensure it stays within parent bounds\n-      overflow: 'hidden', // Prevent any overflow on mobile\n+      overflowX: 'auto', // Enable horizontal scrolling if needed\n     },\n   },\n   dataRow: {\n     display: 'flex',\n     gap: theme.spacing(1),\n-    overflow: 'hidden', // Prevent any overflow\n     [theme.breakpoints.down('sm')]: {\n       flexWrap: 'nowrap',\n       width: '100%', // Keep within container bounds\n-      overflow: 'hidden', // Prevent any overflow\n+      overflowX: 'auto', // Enable horizontal scrolling if needed\n       minWidth: 0, // Allow shrinking\n     },\n   },\n   statItem: {\n@@ -421,14 +417,8 @@\n     msOverflowStyle: 'none', // IE/Edge\n     [theme.breakpoints.up('sm')]: {\n       overflowX: 'visible', // Disable horizontal scrolling on desktop\n       flexDirection: 'row', // Use original layout on desktop\n-    },\n-    [theme.breakpoints.down('sm')]: {\n-      overflowX: 'hidden', // Prevent horizontal scrolling on mobile\n-      width: '100%', // Ensure exact width on mobile\n-      maxWidth: '100%', // Prevent exceeding container\n-      flexWrap: 'nowrap', // Prevent wrapping which could cause issues\n     }\n   },\n   desktopLayout: {\n     display: 'grid',\n"
                },
                {
                    "date": 1771006970389,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -157,9 +157,8 @@\n     width: '100%',\n     minWidth: 0, // Allows flex child to shrink below content size\n     flexWrap: 'wrap', // Allow wrapping on small screens\n     wordBreak: 'break-word', // Break long addresses\n-    overflow: 'hidden', // Prevent overflow\n     [theme.breakpoints.down('md')]: {\n       flexWrap: 'wrap',\n       wordBreak: 'break-word',\n       fontSize: '0.8rem', // Slightly smaller font on mobile\n@@ -167,13 +166,11 @@\n   },\n   content: {\n     padding: theme.spacing(0.5), // Reduced padding since card has padding\n     flex: 1,\n-    overflow: 'hidden', // Prevent any overflow from content\n     [theme.breakpoints.down('md')]: {\n       maxHeight: 'calc(40vh - 120px)', // Adjust based on header and footer heights\n       minHeight: 0,\n-      overflowX: 'hidden', // Ensure no horizontal overflow on mobile\n     },\n   },\n   mainGrid: {\n     width: '100%',\n@@ -425,9 +422,8 @@\n     gridTemplateColumns: '140px 1fr',\n     gap: theme.spacing(1),\n     width: '100%',\n     height: '100%',\n-    overflow: 'hidden', // Prevent any overflow\n     [theme.breakpoints.down('sm')]: {\n       display: 'none', // Hide on mobile\n     }\n   },\n"
                },
                {
                    "date": 1771006991683,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -74,10 +74,9 @@\n       maxHeight: 420, // Allow more height\n     },\n     [theme.breakpoints.down('md')]: {\n       width: '100%',\n-      maxWidth: `calc(100vw - ${theme.spacing(2)} * 2)`, // Fit to screen width minus padding on mobile\n-      minWidth: `calc(100vw - ${theme.spacing(2)} * 2)`, // Ensure it takes appropriate screen width minus padding\n+      maxWidth: '100%',\n       minHeight: '40vh', // Further reduced height for mobile to accommodate scrollable content\n       maxHeight: '40vh', // Fixed height for mobile to enable scrolling\n       margin: 0,\n       borderRadius: theme.spacing(3), // More rounded corners for premium look\n@@ -86,12 +85,8 @@\n     borderRadius: theme.spacing(2),\n     boxShadow: '0 8px 24px rgba(0,0,0,0.12)',\n     display: 'flex',\n     flexDirection: 'column',\n-    overflow: 'hidden', // Prevent any overflow\n-    [theme.breakpoints.down('md')]: {\n-      padding: theme.spacing(1), // Add padding inside the card on mobile\n-    },\n   },\n   header: {\n     padding: theme.spacing(1.5),\n     display: 'flex',\n@@ -106,9 +101,8 @@\n       position: 'sticky',\n       top: 0,\n       zIndex: 2,\n       backgroundColor: theme.palette.background.paper,\n-      margin: theme.spacing(0.5, 0.5, 0, 0.5), // Add margins on mobile (top, right, bottom, left)\n     },\n   },\n   headerButton: {\n     alignSelf: 'flex-start',\n@@ -120,18 +114,15 @@\n     alignItems: 'flex-start',\n     gap: theme.spacing(1),\n     flex: 1,\n     minWidth: 0,\n-    width: '100%', // Ensure it doesn't exceed container width\n-    overflow: 'hidden', // Prevent overflow\n   },\n   headerTopRow: {\n     display: 'flex',\n     alignItems: 'center',\n     gap: theme.spacing(1),\n     width: '100%',\n     flexWrap: 'wrap', // Wrap items on small screens\n-    overflow: 'hidden', // Prevent overflow\n   },\n   deviceName: {\n     fontWeight: 700,\n     fontSize: '1.2rem',\n@@ -164,24 +155,25 @@\n       fontSize: '0.8rem', // Slightly smaller font on mobile\n     },\n   },\n   content: {\n-    padding: theme.spacing(0.5), // Reduced padding since card has padding\n+    padding: theme.spacing(1),\n     flex: 1,\n     [theme.breakpoints.down('md')]: {\n       maxHeight: 'calc(40vh - 120px)', // Adjust based on header and footer heights\n       minHeight: 0,\n     },\n   },\n   mainGrid: {\n+    display: 'grid',\n+    gridTemplateColumns: '140px 1fr',\n+    gap: theme.spacing(1),\n     width: '100%',\n     height: '100%',\n-    overflow: 'hidden', // Prevent any overflow from children\n     [theme.breakpoints.down('sm')]: {\n       display: 'flex',\n       flexDirection: 'column',\n       height: 'auto',\n-      width: '100%', // Ensure it stays within parent bounds\n     },\n   },\n   speedSection: {\n     display: 'flex',\n@@ -199,11 +191,8 @@\n       flexDirection: 'row',\n       padding: 0, // Reduce padding since container has padding\n       alignItems: 'flex-start',\n       flex: '0 0 auto', // Don't grow on mobile\n-      minWidth: 0, // Allow shrinking below content size\n-      width: '100%', // Ensure it stays within parent bounds\n-      overflowX: 'auto', // Enable horizontal scrolling if needed\n     },\n   },\n   speedGaugeContainer: {\n     display: 'flex',\n@@ -213,10 +202,8 @@\n     flex: '0 0 auto', // Don't grow on mobile\n     padding: theme.spacing(0.5),\n     [theme.breakpoints.down('sm')]: {\n       flex: '0 0 auto', // Don't grow on mobile\n-      maxWidth: 100, // Limit width to prevent overflow\n-      minWidth: 90, // Ensure minimum width but allow to be smaller\n     },\n   },\n   mobileDataBox: {\n     display: 'flex',\n@@ -226,10 +213,9 @@\n     backgroundColor: theme.palette.mode === 'dark'\n       ? theme.palette.grey[800]\n       : theme.palette.grey[200],\n     borderRadius: theme.spacing(2),\n-    minWidth: 120,\n-    maxWidth: '40%', // Limit width to 40% of container to prevent overflow\n+    minWidth: 140,\n     boxShadow: '0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06)', // Tailwind-inspired shadow\n     [theme.breakpoints.up('md')]: {\n       display: 'none', // Hide on desktop\n     },\n@@ -271,22 +257,22 @@\n     [theme.breakpoints.down('sm')]: {\n       display: 'flex',\n       flexDirection: 'row',\n       flex: '0 0 auto', // Don't grow on mobile\n-      padding: 0, // Reduce padding since container has padding\n-      minWidth: 0, // Allow shrinking below content size\n-      width: '100%', // Ensure it stays within parent bounds\n-      overflowX: 'auto', // Enable horizontal scrolling if needed\n+      overflowX: 'auto', // Enable horizontal scrolling on mobile\n+      whiteSpace: 'nowrap', // Prevent wrapping\n+      width: '100%', // Full width for horizontal scrolling\n+      padding: theme.spacing(1, 0), // Add some padding for spacing\n     },\n   },\n   dataRow: {\n     display: 'flex',\n     gap: theme.spacing(1),\n     [theme.breakpoints.down('sm')]: {\n+      overflowX: 'auto',\n       flexWrap: 'nowrap',\n-      width: '100%', // Keep within container bounds\n-      overflowX: 'auto', // Enable horizontal scrolling if needed\n-      minWidth: 0, // Allow shrinking\n+      paddingBottom: theme.spacing(1),\n+      width: 'max-content', // Allow the row to be wider than container for scrolling\n     },\n   },\n   statItem: {\n     display: 'flex',\n@@ -303,12 +289,8 @@\n     textAlign: 'center',\n     boxShadow: '0 2px 4px rgba(0,0,0,0.05)', // Subtle shadow for depth\n     [theme.breakpoints.down('sm')]: {\n       flex: '0 0 auto', // Don't grow/shrink on mobile, allow horizontal scrolling\n-      maxWidth: 90, // Limit width on mobile to prevent overflow\n-      height: 70, // Increase height on mobile for better touch targets\n-      minHeight: 70, // Ensure minimum height on mobile\n-      minWidth: 80, // Ensure minimum width but allow to be smaller than desktop\n     },\n     [theme.breakpoints.up('md')]: {\n       flexDirection: 'row', // Row layout on desktop\n       justifyContent: 'flex-start',\n@@ -341,16 +323,10 @@\n     fontSize: '0.8rem',\n   },\n   statContainer: {\n     padding: theme.spacing(0.5),\n-    flex: '1 1 auto', // Allow flex-grow, flex-shrink, and set to auto\n-    minWidth: 0, // Allow shrinking below 120px on mobile\n-    width: '100%', // Take full width of container\n-    [theme.breakpoints.down('sm')]: {\n-      flex: '0 0 auto', // On mobile, don't grow/shrink but allow auto sizing\n-      minWidth: 80, // Minimum width for mobile\n-      maxWidth: '100%', // Ensure it doesn't exceed container width\n-    },\n+    flex: '1 1 120px', // Allow flex-grow, flex-shrink, and set a basis\n+    minWidth: 120,\n   },\n   actions: {\n     justifyContent: 'space-around', // Space out actions evenly on mobile\n     padding: theme.spacing(1, 1.5),\n@@ -362,9 +338,8 @@\n       position: 'sticky',\n       bottom: 0,\n       zIndex: 2,\n       backgroundColor: theme.palette.background.paper,\n-      margin: theme.spacing(0, 0.5, 0.5, 0.5), // Add margins on mobile (top, right, bottom, left)\n     },\n   },\n   root: {\n     pointerEvents: 'none',\n@@ -378,13 +353,13 @@\n       width: 'auto',\n     },\n     [theme.breakpoints.down('md')]: {\n       bottom: theme.spacing(10), // Increased margin from bottom to move component higher\n-      left: theme.spacing(1), // Reduced left margin to prevent overflow\n-      right: theme.spacing(1), // Reduced right margin to prevent overflow\n+      left: theme.spacing(1),\n+      right: theme.spacing(1),\n       width: `calc(100% - ${theme.spacing(2)})`, // Account for left and right margins (1 unit each side = 2 units total)\n       transform: 'none',\n-      maxWidth: '100vw', // Ensure it doesn't exceed viewport width\n+      maxWidth: 'none',\n       borderRadius: theme.spacing(2), // Rounded all corners\n       boxShadow: '0px -4px 12px rgba(0,0,0,0.1)', // Shadow facing upward\n     },\n   },\n@@ -397,37 +372,8 @@\n     display: 'flex',\n     alignItems: 'center',\n     gap: theme.spacing(1),\n   },\n-  horizontalScrollContainer: {\n-    display: 'flex',\n-    flexDirection: 'row',\n-    overflowX: 'auto',\n-    padding: theme.spacing(1),\n-    gap: theme.spacing(1),\n-    width: '100%',\n-    maxWidth: '100%', // Use 100% of container width instead of viewport\n-    boxSizing: 'border-box', // Ensure padding is included in width calculation\n-    '&::-webkit-scrollbar': {\n-      display: 'none' // Hide scrollbar for cleaner look\n-    },\n-    scrollbarWidth: 'none', // Firefox\n-    msOverflowStyle: 'none', // IE/Edge\n-    [theme.breakpoints.up('sm')]: {\n-      overflowX: 'visible', // Disable horizontal scrolling on desktop\n-      flexDirection: 'row', // Use original layout on desktop\n-    }\n-  },\n-  desktopLayout: {\n-    display: 'grid',\n-    gridTemplateColumns: '140px 1fr',\n-    gap: theme.spacing(1),\n-    width: '100%',\n-    height: '100%',\n-    [theme.breakpoints.down('sm')]: {\n-      display: 'none', // Hide on mobile\n-    }\n-  },\n }));\n \n // Custom SpeedGauge Component\n const SpeedGauge = ({ speed, maxSpeed = 120 }) => {\n@@ -632,9 +578,24 @@\n                 <CardContent className={classes.content}>\n                   <div className={classes.mainGrid}>\n                     {/* Horizontal Scrolling Container for Speed Section and Data Section */}\n                     <Box \n-                      className={classes.horizontalScrollContainer}\n+                      sx={{ \n+                        display: 'flex', \n+                        flexDirection: 'row', \n+                        overflowX: 'auto',\n+                        padding: 1,\n+                        gap: 1,\n+                        width: '100%',\n+                        '&::-webkit-scrollbar': {\n+                          display: 'none' // Hide scrollbar for cleaner look\n+                        },\n+                        scrollbarWidth: 'none', // Firefox\n+                        msOverflowStyle: 'none', // IE/Edge\n+                        [theme.breakpoints.down('sm')]: {\n+                          flexDirection: 'row', // Horizontal layout on mobile\n+                        }\n+                      }}\n                     >\n                       {/* Speed Section - Speed on left, mobile data box in center, battery/RSSI on right */}\n                       <div className={classes.speedSection}>\n                         {/* Speed Gauge on Left */}\n@@ -701,9 +662,9 @@\n                                 key.trim() === 'todayDistance' || key.trim() === 'todayStartTime') return null;\n                             if (!position.hasOwnProperty(key) && !position.attributes.hasOwnProperty(key)) return null;\n \n                             return (\n-                              <div key={key} className={classes.statContainer}>\n+                              <div key={key} className={classes.statContainer} style={{ flex: '0 0 auto' }}>\n                                 <div className={classes.statItem}>\n                                   {attributeIcons[key] && (\n                                     <div className={classes.statIcon}>{attributeIcons[key]}</div>\n                                   )}\n@@ -724,9 +685,9 @@\n                                                 textAlign: 'center',\n                                                 fontSize: '0.6rem',\n                                               }}\n                                             >\n-                                              <Typography variant=\"caption\" sx={{ display: 'block', fontWeight: 'bold', fontSize: '0.6rem', wordBreak: 'break-word' }}>\n+                                              <Typography variant=\"caption\" sx={{ display: 'block', fontWeight: 'bold', fontSize: '0.6rem' }}>\n                                                 {dayjs(position[key]).format('DD/MMM/YYYY')}\n                                               </Typography>\n                                             </Box>\n                                             <Box\n@@ -739,9 +700,9 @@\n                                                 fontSize: '0.6rem',\n                                                 mt: 0.1,\n                                               }}\n                                             >\n-                                              <Typography variant=\"caption\" sx={{ display: 'block', fontWeight: 'bold', fontSize: '0.6rem', wordBreak: 'break-word' }}>\n+                                              <Typography variant=\"caption\" sx={{ display: 'block', fontWeight: 'bold', fontSize: '0.6rem' }}>\n                                                 {dayjs(position[key]).format('hh:mm A')}\n                                               </Typography>\n                                             </Box>\n                                           </Box>\n@@ -752,10 +713,9 @@\n                                             variant=\"body2\"\n                                             className={classes.statValue}\n                                             sx={{\n                                               fontSize: (key.trim() === 'fixTime' || key.trim() === 'deviceTime' || key.trim() === 'serverTime')\n-                                                ? '0.6rem' : '0.8rem',\n-                                              wordBreak: 'break-word'\n+                                                ? '0.6rem' : '0.8rem'\n                                             }}\n                                           >\n                                             <PositionValue\n                                               position={position}\n@@ -774,22 +734,10 @@\n                         </div>\n                       </div>\n                     </Box>\n                     \n-                    <Box sx={{ mt: 1, display: 'flex', justifyContent: 'flex-end', width: '100%', overflow: 'hidden' }}>\n-                      <Link \n-                        component={RouterLink} \n-                        underline=\"hover\" \n-                        to={`/position/${position.id}`} \n-                        variant=\"caption\" \n-                        color=\"primary\"\n-                        sx={{ \n-                          overflow: 'hidden', \n-                          textOverflow: 'ellipsis', \n-                          whiteSpace: 'nowrap',\n-                          maxWidth: '100%'\n-                        }}\n-                      >\n+                    <Box sx={{ mt: 1, display: 'flex', justifyContent: 'flex-end' }}>\n+                      <Link component={RouterLink} underline=\"hover\" to={`/position/${position.id}`} variant=\"caption\" color=\"primary\">\n                         {t('sharedShowDetails')}\n                       </Link>\n                     </Box>\n                   </div>\n"
                }
            ],
            "date": 1771001282434,
            "name": "Commit-0",
            "content": "import React, { useState } from 'react';\nimport dayjs from 'dayjs';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useNavigate, Link as RouterLink } from 'react-router-dom';\nimport { Rnd } from 'react-rnd';\nimport {\n  Card,\n  CardContent,\n  Typography,\n  CardActions,\n  IconButton,\n  Menu,\n  MenuItem,\n  Link,\n  Tooltip,\n  Box,\n  Chip,\n  Divider,\n} from '@mui/material';\nimport CloseIcon from '@mui/icons-material/Close';\nimport RouteIcon from '@mui/icons-material/Route';\nimport SendIcon from '@mui/icons-material/Send';\nimport EditIcon from '@mui/icons-material/Edit';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport SpeedIcon from '@mui/icons-material/Speed';\nimport RoomIcon from '@mui/icons-material/Room';\nimport DirectionsCarIcon from '@mui/icons-material/DirectionsCar';\nimport AccessTimeIcon from '@mui/icons-material/AccessTime';\nimport TuneIcon from '@mui/icons-material/Tune';\n\nimport AddressValue from './AddressValue';\nimport PositionValue from './PositionValue';\nimport BatteryIcon from './BatteryIcon';\nimport RssiIcon from './RssiIcon';\n\nconst infoBoxStyle = (color) => ({\n  display: 'flex',\n  flexDirection: 'column',\n  alignItems: 'center',\n  justifyContent: 'center',\n  padding: 10,\n  borderRadius: 12,\n  background: `${color}15`,\n  border: `1px solid ${color}40`,\n  textAlign: 'center',\n});\n\nconst SpeedGauge = ({ speed }) => {\n  const percentage = Math.min((speed || 0) / 120 * 100, 100);\n  const circumference = 2 * Math.PI * 35;\n  const offset = circumference - (percentage / 100) * circumference;\n\n  let color = '#4caf50';\n  if (speed > 80) color = '#ff9800';\n  if (speed > 100) color = '#f44336';\n\n  return (\n    <Box sx={{ position: 'relative', width: 100, height: 100 }}>\n      <svg width=\"100\" height=\"100\">\n        <circle cx=\"50\" cy=\"50\" r=\"35\" stroke=\"#eee\" strokeWidth=\"6\" fill=\"none\" />\n        <circle\n          cx=\"50\"\n          cy=\"50\"\n          r=\"35\"\n          stroke={color}\n          strokeWidth=\"6\"\n          fill=\"none\"\n          strokeDasharray={circumference}\n          strokeDashoffset={offset}\n          strokeLinecap=\"round\"\n          transform=\"rotate(-90 50 50)\"\n        />\n      </svg>\n      <Box sx={{\n        position: 'absolute',\n        top: '50%',\n        left: '50%',\n        transform: 'translate(-50%, -50%)',\n        textAlign: 'center'\n      }}>\n        <Typography variant=\"h6\" fontWeight=\"bold\">\n          {Math.round(speed || 0)}\n        </Typography>\n        <Typography variant=\"caption\">km/h</Typography>\n      </Box>\n    </Box>\n  );\n};\n\nconst StatusCard = ({ deviceId, position, device, onClose }) => {\n\n  const navigate = useNavigate();\n  const [anchorEl, setAnchorEl] = useState(null);\n\n  if (!device) return null;\n\n  const content = (\n    <Card\n      sx={{\n        width: '100%',\n        maxWidth: 500,\n        borderRadius: 4,\n        boxShadow: 4,\n        display: 'flex',\n        flexDirection: 'column',\n        maxHeight: '85vh',\n      }}\n    >\n      {/* HEADER */}\n      <Box sx={{\n        p: 2,\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'flex-start',\n        borderBottom: '1px solid #eee'\n      }}>\n        <Box>\n          <Typography fontWeight=\"bold\" fontSize=\"1rem\">\n            {device.name}\n          </Typography>\n\n          <Box sx={{ display: 'flex', alignItems: 'center', mt: 0.5 }}>\n            <RoomIcon sx={{ fontSize: 16, color: 'red', mr: 0.5 }} />\n            <Typography variant=\"caption\">\n              <AddressValue\n                latitude={position?.latitude}\n                longitude={position?.longitude}\n                originalAddress={position?.address}\n              />\n            </Typography>\n          </Box>\n        </Box>\n\n        <IconButton size=\"small\" onClick={onClose}>\n          <CloseIcon />\n        </IconButton>\n      </Box>\n\n      {/* CONTENT */}\n      {position && (\n        <CardContent sx={{ overflowY: 'auto' }}>\n\n          {/* SPEED */}\n          <Box sx={{ display: 'flex', justifyContent: 'center', py: 2 }}>\n            <SpeedGauge speed={position.speed} />\n          </Box>\n\n          {/* INFO GRID */}\n          <Box sx={{\n            display: 'grid',\n            gridTemplateColumns: '1fr 1fr',\n            gap: 1,\n            mb: 2\n          }}>\n            <Box sx={infoBoxStyle('#4caf50')}>\n              <BatteryIcon batteryLevel={position.attributes?.batteryLevel} />\n              <Typography variant=\"caption\">Battery</Typography>\n              <Typography fontWeight=\"bold\">\n                {position.attributes?.batteryLevel ?? '-'}%\n              </Typography>\n            </Box>\n\n            <Box sx={infoBoxStyle('#ff9800')}>\n              <RssiIcon rssi={position.attributes?.rssi} />\n              <Typography variant=\"caption\">Signal</Typography>\n              <Typography fontWeight=\"bold\">\n                {position.attributes?.rssi ?? '-'} dBm\n              </Typography>\n            </Box>\n\n            <Box sx={infoBoxStyle('#2196f3')}>\n              <DirectionsCarIcon fontSize=\"small\" />\n              <Typography variant=\"caption\">Course</Typography>\n              <Typography fontWeight=\"bold\">\n                {position.course ?? '-'}\n              </Typography>\n            </Box>\n\n            <Box sx={infoBoxStyle('#9c27b0')}>\n              <AccessTimeIcon fontSize=\"small\" />\n              <Typography variant=\"caption\">Fix Time</Typography>\n              <Typography fontWeight=\"bold\" fontSize=\"0.75rem\">\n                {dayjs(position.fixTime).format('hh:mm A')}\n              </Typography>\n            </Box>\n          </Box>\n\n          <Divider sx={{ mb: 1 }} />\n\n          <Link\n            component={RouterLink}\n            to={`/position/${position.id}`}\n            variant=\"caption\"\n          >\n            Show Details\n          </Link>\n\n        </CardContent>\n      )}\n\n      {/* ACTIONS */}\n      <CardActions sx={{ justifyContent: 'space-around', borderTop: '1px solid #eee' }}>\n        <Tooltip title=\"Map Options\">\n          <IconButton onClick={(e) => setAnchorEl(e.currentTarget)}>\n            <TuneIcon />\n          </IconButton>\n        </Tooltip>\n\n        <Tooltip title=\"Replay\">\n          <IconButton onClick={() => navigate(`/replay?deviceId=${deviceId}`)}>\n            <RouteIcon />\n          </IconButton>\n        </Tooltip>\n\n        <Tooltip title=\"Command\">\n          <IconButton onClick={() => navigate(`/settings/device/${deviceId}/command`)}>\n            <SendIcon />\n          </IconButton>\n        </Tooltip>\n\n        <Tooltip title=\"Edit\">\n          <IconButton onClick={() => navigate(`/settings/device/${deviceId}`)}>\n            <EditIcon />\n          </IconButton>\n        </Tooltip>\n\n        <Tooltip title=\"Delete\">\n          <IconButton>\n            <DeleteIcon />\n          </IconButton>\n        </Tooltip>\n      </CardActions>\n\n      <Menu anchorEl={anchorEl} open={Boolean(anchorEl)} onClose={() => setAnchorEl(null)}>\n        <MenuItem component=\"a\" target=\"_blank\"\n          href={`https://www.google.com/maps/search/?api=1&query=${position?.latitude}%2C${position?.longitude}`}>\n          Open in Google Maps\n        </MenuItem>\n      </Menu>\n    </Card>\n  );\n\n  return (\n    <Box sx={{\n      position: 'fixed',\n      bottom: 80,\n      left: 16,\n      right: 16,\n      zIndex: 1000,\n      display: 'flex',\n      justifyContent: 'center'\n    }}>\n      {window.innerWidth > 900 ? (\n        <Rnd enableResizing={false}>\n          {content}\n        </Rnd>\n      ) : content}\n    </Box>\n  );\n};\n\nexport default StatusCard;\n"
        }
    ]
}